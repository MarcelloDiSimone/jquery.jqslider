(function(d,b,a,e){function c(g,f){this.$el=d(g);this.o=d.extend(c.prototype.defaults,f,d.parseJSON((this.$el.data("options")||"").replace(/'/g,'"')));this.isVertical=this.$el.hasClass("jqs-vertical");this._block=false;this._av=[{pos:"left",size:"width"},{pos:"top",size:"height"}];this._tmpl="<"+this.o.slideTag+"/>";this._container=this.$el.children(this.o.containerSelector).addClass("jqs-container");this._list=this._container.children(this.o.listSelector).addClass("jqs-list");this._slides=this._list.children(this.o.slideTag).addClass("jqs-slide");if(this.o.autoinit!==false){this.init()}}c.prototype={defaults:{autoinit:true,circular:false,startSlide:0,duration:500,easingFunction:"linear",containerSelector:".jqs-container",listSelector:"ul",slideTag:"li"},next:function(){var f=this._getSibblingIndex();if(f!==false){this.gotoSlide(f,false)}},prev:function(){var f=this._getSibblingIndex(true);if(f!==false){this.gotoSlide(f,true)}},gotoSlide:function(f,g,i){if(this._block===true||f<0||f>=this._slides.length||f==this.activeIndex){return}this._block=true;g=g||false;var o=this,j=this.getSlide(f),k=this.getSlide(this.activeIndex),m={},n=this._av[+this.isVertical].pos,l=this._av[+this.isVertical].size,h=this._list[l]()/2;this._startAnimation(f,g,i,k,j);if(i===true){this._endAnimation(f,g,i,k,j)}else{this._list.toggleClass("jqs-list-before",g).css(n,g?-h:0);j.addClass("jqs-next");m[n]=(g)?"0":-h;this._list.animate(m,{duration:this.o.duration,easing:this.o.easingFunction,complete:function(){o._endAnimation(f,g,i,k,j)}})}},_startAnimation:function(h,g,f,j,i){j.trigger("animationoutstart");i.trigger("animationinstart");this.$el.trigger("animationstart",[this.activeIndex,h,g,f])},_endAnimation:function(h,g,f,j,i){j.removeClass("jqs-current").trigger("animationoutend");i.removeClass("jqs-next").addClass("jqs-current").trigger("animationinend");this._list.attr("style","").removeClass("jqs-list-before");this.activeIndex=h;this._block=false;this._resetControls();this.$el.trigger("animationend",[this.activeIndex,h,g,f])},getSlideCount:function(){return this._slides.length},switchOrientation:function(){this.$el.toggleClass("jqs-vertical");this.isVertical=!this.isVertical},addSlide:function(g){var f=d(this._tmpl,{"class":"jqs-slide"});if(e!==g&&g<this._slides.length){this.getSlide(g).before(f)}else{this._list.append(f)}this._slides=this._list.children(".jqs-slide");return f},getSlide:function(f){return this._slides.eq(f)},removeSlide:function(f){var g=(typeof f==="number")?this.getSlide(f):(typeof f==="string")?this._slides.find(f):f;this._slides.remove(g)},_getSibblingIndex:function(i){var g,h=this.o.circular,f=this.activeIndex,j=this._slides.length;if(i){g=(f>0)?--f:h?--j:false}else{g=(++f<j)?f:h?0:false}return g},_resetControls:function(){if(this._handlers.length&&!this.o.circular){this._handlers.removeClass("jqs-inactive");if(this.activeIndex==0){this._prevHandler.addClass("jqs-inactive")}else{if(this.activeIndex==this._slides.length-1){this._nextHandler.addClass("jqs-inactive")}}}},_initControls:function(){var g=this,f=this._handlers=this.$el.children(".jqs-handler");if(f.length){this._nextHandler=f.filter(".jqs-handler-next").bind("click",function(h){h.preventDefault();g.next()});this._prevHandler=f.filter(".jqs-handler-prev").bind("click",function(h){h.preventDefault();g.prev()});if(!this.o.circular&&this.activeIndex==0){this._prevHandler.addClass("jqs-inactive")}}},init:function(){var f=this,g=this._slides.filter('[class*="jqs-current"]').index();this.activeIndex=g>=0?g:this.o.startSlide||0;this.getSlide(this.activeIndex).addClass("jqs-current");this._initControls();this.$el.bind({prev:function(){f.prev()},next:function(){f.next()},gotoslide:function(k,j,i,h){f.gotoSlide(j,i,h)}}).trigger("init");return this}};c.defaults=c.prototype.defaults;d.fn.jqslider=function(f){return this.each(function(){if(e==d(this).data("jqslider")){d(this).data("jqslider",new c(this,f))}})};b.JQSlider=c})(window.jQuery||window.Zepto,window,document);